(()=>{"use strict";const e=require("express"),t=require("swagger-jsdoc"),s=require("swagger-ui-express");var o=t({definition:{info:{title:"UMC Study API",version:"1.0.0",description:"UMC Study API with express, API 설명"},host:"localhost:3000",basePath:"/"},apis:["./src/routes/*.js","./swagger/*"]});const r=require("dotenv"),n=require("cors");var u=function(e,t){return{isSuccess:e.isSuccess,code:e.code,message:e.message,result:t}};function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function i(e){var t="function"==typeof Map?new Map:void 0;return i=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,s)}function s(){return a(e,arguments,E(this).constructor)}return s.prototype=Object.create(e.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),S(s,e)},i(e)}function a(e,t,s){return a=f()?Reflect.construct.bind():function(e,t,s){var o=[null];o.push.apply(o,t);var r=new(Function.bind.apply(e,o));return s&&S(r,s.prototype),r},a.apply(null,arguments)}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function S(e,t){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},S(e,t)}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}(n,e);var t,s,o,r=(s=n,o=f(),function(){var e,t=E(s);if(o){var r=E(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(t=r.call(this,e.message)).data=e,t}return t=n,Object.defineProperty(t,"prototype",{writable:!1}),t}(i(Error));const d=require("http-status-codes");var p={SUCCESS:{status:d.StatusCodes.OK,isSuccess:!0,code:2e3,message:"success!"},INTERNAL_SERVER_ERROR:{status:d.StatusCodes.INTERNAL_SERVER_ERROR,isSuccess:!1,code:"COMMON000",message:"서버 에러, 관리자에게 문의 바랍니다."},BAD_REQUEST:{status:d.StatusCodes.BAD_REQUEST,isSuccess:!1,code:"COMMON001",message:"잘못된 요청입니다."},UNAUTHORIZED:{status:d.StatusCodes.UNAUTHORIZED,isSuccess:!1,code:"COMMON002",message:"권한이 잘못되었습니다."},METHOD_NOT_ALLOWED:{status:d.StatusCodes.METHOD_NOT_ALLOWED,isSuccess:!1,code:"COMMON003",message:"지원하지 않는 Http Method 입니다."},FORBIDDEN:{status:d.StatusCodes.FORBIDDEN,isSuccess:!1,code:"COMMON004",message:"금지된 요청입니다."},NOT_FOUND:{status:d.StatusCodes.NOT_FOUND,isSuccess:!1,code:"COMMON005",message:"요청한 페이지를 찾을 수 없습니다. 관리자에게 문의 바랍니다."},MEMBER_NOT_FOUND:{status:d.StatusCodes.BAD_REQUEST,isSuccess:!1,code:"MEMBER4001",message:"사용자가 없습니다."},NICKNAME_NOT_EXIST:{status:d.StatusCodes.BAD_REQUEST,isSuccess:!1,code:"MEMBER4002",message:"닉네임은 필수입니다."},EMAIL_ALREADY_EXIST:{status:d.StatusCodes.BAD_REQUEST,isSuccess:!1,code:"MEMBER4003",message:"이미 가입된 이메일이 존재합니다."},PARAMETER_IS_WRONG:{status:d.StatusCodes.BAD_REQUEST,isSuccess:!1,code:"DATABASE4001",message:"쿼리 실행 시 전달되는 파라미터가 잘못되었습니다. 파라미터 개수 혹은 파라미터 형식을 확인해주세요."},ARTICLE_NOT_FOUND:{status:d.StatusCodes.NOT_FOUND,isSuccess:!1,code:"ARTICLE4001",message:"게시글이 없습니다."},LOGIN_PARAM_NOT_EXIST:{status:d.StatusCodes.BAD_REQUEST,isSuccess:!1,code:"SIGNIN4001",message:"ID 혹은 PW 값이 존재하지 않습니다."},LOGIN_ID_NOT_EXIST:{status:d.StatusCodes.NOT_FOUND,isSuccess:!1,code:"SIGNIN4002",message:"아이디를 찾을 수 없습니다."},LOGIN_PASSWORD_WRONG:{status:d.StatusCodes.BAD_REQUEST,isSuccess:!1,code:"SIGNIN4003",message:"비밀번호가 일치하지 않습니다."},TOKEN_IS_EXPIRED:{status:d.StatusCodes.INSUFFICIENT_SPACE_ON_RESOURCE,isSuccess:!1,code:"SIGNIN4004",message:"토큰이 만료되었습니다."},TOKEN_IS_INVALID:{status:d.StatusCodes.UNAUTHORIZED,isSuccess:!1,code:"SIGNIN4005",message:"유효하지 않은 토큰입니다."}},l=e.Router();l.get("",(function(e,t,s){t.send("HELLO, I'm Healthy!")})),r.config();var N=e();N.set("PORT",process.env.PORT||3e3),N.use(n()),N.use(e.static("public")),N.use(e.json()),N.use(e.urlencoded({extended:!1})),N.use("/api-docs",s.serve,s.setup(o)),N.use("/health",l),N.get("/",(function(e,t,s){t.send(u(p.SUCCESS,"루트 페이지!"))})),N.use((function(e,t,s){s(new O(p.NOT_FOUND))})),N.use((function(e,t,s,o){s.locals.message=e.message,s.locals.error={},console.error(e),s.status(e.data.status||p.INTERNAL_SERVER_ERROR).send(u(e.data))})),N.listen(N.get("PORT"),(function(){console.log("Example app listening on port ".concat(N.get("PORT")))}))})();